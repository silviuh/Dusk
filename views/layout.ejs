<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="profile.css">
    <!-- <link rel="stylesheet" href="dashboard.css"> -->
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <!-- <script type="text/javascript" src="settings.js"></script> -->
    <script type="text/javascript" src="main.js"></script>
</head>

<body>
    <main>
        <%- body -%>
    </main>

    <!--
    <footer>
        <br>
        <br>
        <br>
        <hr>
        <span>&#169;</span>
        Dusk V.013 by Camaro Group North America
    </footer>
    -->
    <script type="text/javascript">
        const form = document.getElementById('update-form');
        if (form !== null) {
            form.addEventListener('submit', sendData);

            async function sendData(data) {
                event.preventDefault()
                console.log("am aj aiic 2");

                const xhttp = new XMLHttpRequest();
                xhttp.open("POST", "/update-profile", true);
                xhttp.setRequestHeader("Content-type", "application/json");

                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        var response = this.responseText;
                        if (this.status === 'ok') {
                            // everythign went fine
                            alert('Success')
                        } else {
                            alert(response.error)
                        }
                        /*
                        if (response === "ok") {
                            alert("User information updated");
                        }
                        else if (response === "error") {
                            alert("there was an error in sending the data to the server.");
                        }
                        */
                    }
                };

                var data = {
                    firstname: document.getElementById('firstname').value,
                    lastname: document.getElementById('lastname').value,
                    password: document.getElementById('password').value
                };

                xhttp.send(JSON.stringify(data));
            }
        }
    </script>
</body>

</html>